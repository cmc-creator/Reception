<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Destiny Springs Reception Hub 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        @keyframes fade-in { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fade-in 0.3s ease-out forwards; }
    </style>

    <script type="module">
        import { initializeApp, getApps, getApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        import { getFirestore, collection, doc, onSnapshot, setDoc, addDoc, updateDoc, deleteDoc, query } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";

        // CONFIGURATION
        const rawConfig = window.__firebase_config || localStorage.getItem('ds_firebase_config');
        const firebaseConfig = rawConfig ? JSON.parse(rawConfig) : null;
        const appId = window.__app_id || 'destiny-springs-hub';

        const HOLIDAYS_2026 = {
            "2026-01-01": "New Year's Day", "2026-01-19": "MLK Jr. Day", "2026-02-16": "Presidents' Day",
            "2026-05-25": "Memorial Day", "2026-06-19": "Juneteenth", "2026-07-03": "Indep. Day (Obs)",
            "2026-09-07": "Labor Day", "2026-10-12": "Columbus Day", "2026-11-11": "Veterans Day",
            "2026-11-26": "Thanksgiving Day", "2026-12-25": "Christmas Day",
        };

        const RECEPTIONISTS = {
            izzy: { name: 'Izzy', color: 'bg-rose-500', text: 'text-rose-400', border: 'border-rose-500/30' },
            karen: { name: 'Karen', color: 'bg-cyan-500', text: 'text-cyan-400', border: 'border-cyan-500/30' },
            kenny: { name: 'Kenny', color: 'bg-orange-500', text: 'text-orange-400', border: 'border-orange-500/30' },
            annalissia: { name: 'Annalissia', color: 'bg-violet-500', text: 'text-violet-400', border: 'border-violet-500/30' },
            julie: { name: 'Julie', color: 'bg-lime-500', text: 'text-lime-400', border: 'border-lime-500/30' },
            nathan: { name: 'Nathan', color: 'bg-indigo-500', text: 'text-indigo-400', border: 'border-indigo-500/30' },
            patrice: { name: 'Patrice', color: 'bg-teal-500', text: 'text-teal-400', border: 'border-teal-500/30' },
            prn: { name: 'PRN/Temp', color: 'bg-slate-500', text: 'text-slate-400', border: 'border-slate-500/30' },
        };

        const DESK_VIBES = [
            { emoji: 'â˜•', label: 'Coffee Powered' }, { emoji: 'âœ¨', label: 'Sparkle Mode' },
            { emoji: 'ðŸš€', label: 'Fast & Efficient' }, { emoji: 'ðŸŽ§', label: 'In the Zone' },
            { emoji: 'ðŸŒˆ', label: 'Busy & Happy' }, { emoji: 'ðŸ¦', label: 'Chaos Coordinator' }
        ];

        const INITIAL_REPORT = {
            mail: '', property: '', keysBadges: '', supplies: '', visitations: '',
            discharges: '', itConcerns: '', aoc: '', maintenance: '', caseManager: '',
            visitorBook: '', otherConcerns: ''
        };

        const Icons = {
            Calendar: () => React.createElement('svg', { width: 20, height: 20, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round", strokeLinejoin: "round" }, 
                React.createElement('rect', { x: 3, y: 4, width: 18, height: 18, rx: 2, ry: 2 }),
                React.createElement('line', { x1: 16, y1: 2, x2: 16, y2: 6 }),
                React.createElement('line', { x1: 8, y1: 2, x2: 8, y2: 6 }),
                React.createElement('line', { x1: 3, y1: 10, x2: 21, y2: 10 })
            ),
            FileText: () => React.createElement('svg', { width: 20, height: 20, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round", strokeLinejoin: "round" },
                React.createElement('path', { d: "M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" }),
                React.createElement('polyline', { points: "14 2 14 8 20 8" }),
                React.createElement('line', { x1: 16, y1: 13, x2: 8, y2: 13 }),
                React.createElement('line', { x1: 16, y1: 17, x2: 8, y2: 17 }),
                React.createElement('polyline', { points: "10 9 9 9 8 9" })
            )
        };

        function App() {
            const [user, setUser] = React.useState(null);
            const [db, setDb] = React.useState(null);
            const [isDarkMode, setIsDarkMode] = React.useState(true);
            const [currentDate, setCurrentDate] = React.useState(new Date(2026, 0, 1));
            const [activeTab, setActiveTab] = React.useState('calendar');
            const [selectedDate, setSelectedDate] = React.useState(null);
            const [events, setEvents] = React.useState({});
            const [tasks, setTasks] = React.useState([]);
            const [deskStatus, setDeskStatus] = React.useState({ vibe: DESK_VIBES[0], note: 'We\'re parked at 3 West.' });
            const [currentReport, setCurrentReport] = React.useState(INITIAL_REPORT);
            const [isAddModalOpen, setIsAddModalOpen] = React.useState(false);
            const [newEvent, setNewEvent] = React.useState({ title: 'Front Desk Shift', empId: 'izzy', time: '09:00' });
            const [newTaskText, setNewTaskText] = React.useState('');
            const [configInput, setConfigInput] = React.useState('');
            const [permissionError, setPermissionError] = React.useState(false);

            React.useEffect(() => {
                if (!firebaseConfig) return;
                const initialize = async () => {
                    try {
                        const firebaseApp = getApps().length > 0 ? getApp() : initializeApp(firebaseConfig);
                        const auth = getAuth(firebaseApp);
                        const firestore = getFirestore(firebaseApp);
                        setDb(firestore);
                        await signInAnonymously(auth);
                    } catch (e) { console.error("Firebase Auth Init failed:", e); }
                };
                initialize();
                return onAuthStateChanged(getAuth(), setUser);
            }, []);

            React.useEffect(() => {
                if (!user || !db) return;

                const handleError = (err) => {
                    if (err.code === 'permission-denied') setPermissionError(true);
                };

                const unsubShifts = onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'shifts'), (snap) => {
                    const data = {};
                    snap.forEach(d => {
                        const s = d.data();
                        if (!data[s.date]) data[s.date] = [];
                        data[s.date].push({ ...s, id: d.id });
                    });
                    setEvents(data);
                }, handleError);

                const unsubTasks = onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'checklist'), (snap) => {
                    const list = [];
                    snap.forEach(d => list.push({ ...d.data(), id: d.id }));
                    setTasks(list);
                }, handleError);

                const unsubStatus = onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'deskStatus', 'current'), (snap) => {
                    if (snap.exists()) setDeskStatus(snap.data());
                }, handleError);

                const unsubReport = onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'currentReport', 'current'), (snap) => {
                    if (snap.exists()) setCurrentReport({ ...INITIAL_REPORT, ...snap.data() });
                }, handleError);

                return () => { unsubShifts(); unsubTasks(); unsubStatus(); unsubReport(); };
            }, [user, db]);

            const saveStatus = (v, n) => setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'deskStatus', 'current'), { vibe: v, note: String(n) });
            const saveReport = (f, v) => setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'currentReport', 'current'), { ...currentReport, [f]: String(v) });
            const addShift = () => {
                if (!selectedDate) return;
                addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'shifts'), { ...newEvent, date: String(selectedDate), createdAt: Date.now() });
                setIsAddModalOpen(false);
            };

            const month = currentDate.getMonth();
            const year = currentDate.getFullYear();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const firstDayOfMonth = new Date(year, month, 1).getDay();

            if (!firebaseConfig) return React.createElement('div', { className: "h-screen bg-slate-950 flex items-center justify-center p-6 text-center" }, 
                React.createElement('div', { className: "max-w-md space-y-6" },
                    React.createElement('div', { className: "text-blue-500 font-black text-4xl mb-2" }, "DS"),
                    React.createElement('h2', { className: "text-white text-xl font-bold uppercase tracking-tight" }, "Connect Team Hub"),
                    React.createElement('p', { className: "text-slate-400 text-sm" }, "Paste your Firebase Config to start syncing data across all employee devices."),
                    React.createElement('textarea', { 
                        className: "w-full bg-slate-900 border border-slate-800 rounded-xl p-4 text-xs h-32 text-blue-400 outline-none",
                        placeholder: '{ "apiKey": "...", ... }',
                        value: configInput,
                        onChange: e => setConfigInput(e.target.value)
                    }),
                    React.createElement('button', { 
                        onClick: () => { try { localStorage.setItem('ds_firebase_config', JSON.stringify(JSON.parse(configInput))); window.location.reload(); } catch(e){alert("Invalid Config JSON")} },
                        className: "w-full bg-blue-600 text-white py-4 rounded-xl font-black shadow-lg uppercase tracking-widest active:scale-95 transition-transform"
                    }, "Go Live")
                )
            );

            if (permissionError) return React.createElement('div', { className: "h-screen bg-slate-950 flex items-center justify-center p-6 text-center" }, 
                React.createElement('div', { className: "max-w-xl space-y-6" },
                    React.createElement('div', { className: "text-rose-500 font-black text-4xl" }, "ACCESS DENIED"),
                    React.createElement('p', { className: "text-slate-400 text-sm" }, "Your Firebase project needs to allow data saving. Go to Firestore > Rules and set:"),
                    React.createElement('pre', { className: "bg-black p-4 rounded-xl text-blue-400 text-[10px] text-left border border-white/10" }, 
                        `rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    match /{document=**} {\n      allow read, write: if true;\n    }\n  }\n}`
                    ),
                    React.createElement('button', { onClick: () => window.location.reload(), className: "bg-blue-600 text-white px-8 py-3 rounded-xl font-bold" }, "Rules Updated - Reload")
                )
            );

            const calendarDays = [];
            for (let i = 0; i < firstDayOfMonth; i++) calendarDays.push(React.createElement('div', { key: `p-${i}`, className: `h-24 sm:h-32 border ${isDarkMode ? 'border-slate-800 bg-slate-900/10' : 'border-slate-100'}` }));
            for (let d = 1; d <= daysInMonth; d++) {
                const dateKey = `${year}-${String(month + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
                const isHoliday = HOLIDAYS_2026[dateKey];
                const dayShifts = events[dateKey] || [];
                calendarDays.push(
                    React.createElement('div', {
                        key: d,
                        onClick: () => setSelectedDate(dateKey),
                        className: `h-24 sm:h-32 border p-2 cursor-pointer relative group transition-all ${isDarkMode ? 'border-slate-800 hover:bg-slate-800' : 'border-slate-100 hover:bg-slate-50'} ${selectedDate === dateKey ? 'ring-2 ring-blue-500 z-10' : ''}`
                    }, 
                        React.createElement('span', { className: `text-sm font-bold ${isHoliday ? 'text-rose-500' : isDarkMode ? 'text-slate-500' : 'text-slate-400'}` }, d),
                        isHoliday && React.createElement('div', { className: "text-[8px] text-rose-500 font-bold uppercase truncate" }, String(isHoliday)),
                        React.createElement('div', { className: "mt-1 space-y-0.5 overflow-hidden" }, 
                            dayShifts.map(s => React.createElement('div', { key: s.id, className: `${RECEPTIONISTS[s.empId]?.color || 'bg-slate-400'} text-white text-[9px] px-1 rounded truncate` }, `${String(s.time)} ${RECEPTIONISTS[s.empId]?.name || 'Staff'}`))
                        ),
                        React.createElement('button', { 
                            onClick: (e) => { e.stopPropagation(); setSelectedDate(dateKey); setIsAddModalOpen(true); },
                            className: "absolute bottom-1 right-1 opacity-0 group-hover:opacity-100 bg-blue-600 text-white px-2 py-0.5 rounded-lg text-xs"
                        }, "+")
                    )
                );
            }

            return React.createElement('div', { className: `${isDarkMode ? 'bg-slate-950 text-slate-100' : 'bg-white text-slate-900'} h-screen flex flex-col md:flex-row overflow-hidden font-sans` },
                // Sidebar
                React.createElement('div', { className: `w-20 border-r flex flex-col items-center py-8 gap-10 ${isDarkMode ? 'bg-slate-900 border-slate-800' : 'bg-slate-50 border-slate-200'}` },
                    React.createElement('div', { className: "text-blue-500 font-black text-2xl" }, "DS"),
                    React.createElement('button', { onClick: () => setActiveTab('calendar'), className: `p-3 rounded-2xl transition-all ${activeTab === 'calendar' ? 'bg-blue-600 shadow-lg' : 'hover:bg-slate-800'}` }, React.createElement(Icons.Calendar)),
                    React.createElement('button', { onClick: () => setActiveTab('report'), className: `p-3 rounded-2xl transition-all ${activeTab === 'report' ? 'bg-blue-600 shadow-lg' : 'hover:bg-slate-800'}` }, React.createElement(Icons.FileText)),
                    React.createElement('button', { onClick: () => setIsDarkMode(!isDarkMode), className: "mt-auto p-3" }, isDarkMode ? "â˜€ï¸" : "ðŸŒ™")
                ),
                
                activeTab === 'calendar' ? 
                React.createElement('div', { className: "flex-1 flex overflow-hidden" },
                    React.createElement('div', { className: `w-80 border-r p-6 overflow-y-auto no-scrollbar ${isDarkMode ? 'bg-slate-900/40 border-slate-800' : 'bg-slate-50 border-slate-100'}` },
                        React.createElement('header', { className: "mb-8 text-left" },
                            React.createElement('h1', { className: "text-xl font-black tracking-tighter" }, "DESTINY SPRINGS"),
                            React.createElement('p', { className: "text-[10px] font-bold text-slate-500 uppercase tracking-widest" }, "Front Desk Intel")
                        ),
                        React.createElement('section', { className: "mb-8 p-4 rounded-2xl bg-blue-500/5 border border-blue-500/10 text-left" },
                            React.createElement('h2', { className: "text-[10px] font-black text-slate-500 uppercase mb-3 tracking-widest" }, "Current Vibe"),
                            React.createElement('div', { className: "flex flex-wrap gap-2 mb-4" }, DESK_VIBES.map(v => React.createElement('button', { key: v.label, onClick: () => saveStatus(v, deskStatus.note), className: `p-2 rounded-xl text-xl ${deskStatus.vibe?.label === v.label ? 'bg-blue-600 shadow-lg' : 'bg-slate-800/50'}` }, v.emoji))),
                            React.createElement('textarea', { value: deskStatus.note || '', onChange: e => saveStatus(deskStatus.vibe, e.target.value), className: "w-full bg-slate-800/50 border-none rounded-xl p-3 text-xs h-20 outline-none", placeholder: "Shift notes..." })
                        ),
                        React.createElement('section', { className: "mb-8 text-left" },
                            React.createElement('h2', { className: "text-[10px] font-black text-slate-500 uppercase mb-3 tracking-widest" }, "Daily Tasks"),
                            React.createElement('form', { onSubmit: e => { e.preventDefault(); if(!newTaskText.trim())return; addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'checklist'), { text: newTaskText, completed: false, createdAt: Date.now() }); setNewTaskText(''); }, className: "flex gap-2 mb-4" }, 
                                React.createElement('input', { value: newTaskText,
