<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Destiny Springs Reception Hub 2026</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body { background-color: #020617; margin: 0; padding: 0; color: #f8fafc; font-family: ui-sans-serif, system-ui, sans-serif; overflow: hidden; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        @keyframes fade-in { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fade-in 0.3s ease-out forwards; }
        
        /* Drag and Drop Visuals */
        .drag-over { border: 2px dashed #3b82f6 !important; background-color: rgba(59, 130, 246, 0.1) !important; transform: scale(1.02); transition: all 0.2s ease; }
        .draggable-staff:hover { cursor: grab; }
        .draggable-staff:active { cursor: grabbing; }

        @media print {
            .no-print { display: none !important; }
            .print-only { display: block !important; }
            body { background-color: white !important; color: black !important; overflow: visible !important; }
            .flex-1 { overflow: visible !important; }
        }
    </style>

    <script type="module">
        import { initializeApp, getApps, getApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, doc, onSnapshot, setDoc, addDoc, updateDoc, deleteDoc, query } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCYraZ_M0NknCg6lgdncSpucHfgPOMqBi8",
            authDomain: "reception-calendar-1.firebaseapp.com",
            projectId: "reception-calendar-1",
            storageBucket: "reception-calendar-1.firebasestorage.app",
            messagingSenderId: "613158953901",
            appId: "1:613158953901:web:ed3f0a6cc4cb23f65df724",
            measurementId: "G-5PZMYFEPYW"
        };

        const app = !getApps().length ? initializeApp(firebaseConfig) : getApp();
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = 'destiny-springs-hub';

        const HOLIDAYS_2026 = {
            "2026-01-01": "New Year's Day", "2026-01-19": "MLK Jr. Day", "2026-02-16": "Presidents' Day",
            "2026-05-25": "Memorial Day", "2026-06-19": "Juneteenth", "2026-07-03": "Indep. Day (Obs)",
            "2026-09-07": "Labor Day", "2026-10-12": "Columbus Day", "2026-11-11": "Veterans Day",
            "2026-11-26": "Thanksgiving Day", "2026-12-25": "Christmas Day",
        };

        const DESK_VIBES = [
            { emoji: 'â˜•', label: 'Coffee Powered' }, { emoji: 'âœ¨', label: 'Sparkle Mode' },
            { emoji: 'ðŸš€', label: 'Fast & Efficient' }, { emoji: 'ðŸŽ§', label: 'In the Zone' },
            { emoji: 'ðŸŒˆ', label: 'Busy & Happy' }, { emoji: 'ðŸ¦', label: 'Chaos Coordinator' }
        ];

        const COLORS = ['bg-rose-500', 'bg-cyan-500', 'bg-orange-500', 'bg-violet-500', 'bg-lime-500', 'bg-indigo-500', 'bg-teal-500', 'bg-slate-500'];

        const INITIAL_REPORT = {
            mail: '', property: '', keysBadges: '', supplies: '', visitations: '',
            discharges: '', itConcerns: '', aoc: '', maintenance: '', caseManager: '',
            visitorBook: '', otherConcerns: ''
        };

        const Icons = {
            Calendar: () => React.createElement('svg', { width: 20, height: 20, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round", strokeLinejoin: "round" }, 
                React.createElement('rect', { x: 3, y: 4, width: 18, height: 18, rx: 2, ry: 2 }),
                React.createElement('line', { x1: 16, y1: 2, x2: 16, y2: 6 }),
                React.createElement('line', { x1: 8, y1: 2, x2: 8, y2: 6 }),
                React.createElement('line', { x1: 3, y1: 10, x2: 21, y2: 10 })
            ),
            FileText: () => React.createElement('svg', { width: 20, height: 20, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round", strokeLinejoin: "round" },
                React.createElement('path', { d: "M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" }),
                React.createElement('polyline', { points: "14 2 14 8 20 8" }),
                React.createElement('line', { x1: 16, y1: 13, x2: 8, y2: 13 }),
                React.createElement('line', { x1: 16, y1: 17, x2: 8, y2: 17 }),
                React.createElement('polyline', { points: "10 9 9 9 8 9" })
            ),
            Users: () => React.createElement('svg', { width: 20, height: 20, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round", strokeLinejoin: "round" },
                React.createElement('path', { d: "M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" }),
                React.createElement('circle', { cx: "9", cy: "7", r: "4" }),
                React.createElement('path', { d: "M23 21v-2a4 4 0 0 0-3-3.87" }),
                React.createElement('path', { d: "M16 3.13a4 4 0 0 1 0 7.75" })
            )
        };

        function App() {
            const [user, setUser] = React.useState(null);
            const [currentDate, setCurrentDate] = React.useState(new Date(2026, 0, 1));
            const [activeTab, setActiveTab] = React.useState('calendar');
            const [selectedDate, setSelectedDate] = React.useState(null);
            
            // Sync with Firestore or Local Storage
            const [events, setEvents] = React.useState(() => JSON.parse(localStorage.getItem('ds_hub_events')) || {});
            const [tasks, setTasks] = React.useState(() => JSON.parse(localStorage.getItem('ds_hub_tasks')) || []);
            const [staff, setStaff] = React.useState(() => JSON.parse(localStorage.getItem('ds_hub_staff')) || {});
            const [deskStatus, setDeskStatus] = React.useState(() => JSON.parse(localStorage.getItem('ds_hub_vibe')) || { vibe: DESK_VIBES[0], note: '' });
            const [currentReport, setCurrentReport] = React.useState(() => JSON.parse(localStorage.getItem('ds_hub_report')) || INITIAL_REPORT);

            const [isAddModalOpen, setIsAddModalOpen] = React.useState(false);
            const [isStaffModalOpen, setIsStaffModalOpen] = React.useState(false);
            const [newEvent, setNewEvent] = React.useState({ title: 'Shift', empId: '', time: '09:00' });
            const [newStaffName, setNewStaffName] = React.useState('');
            const [newTaskText, setNewTaskText] = React.useState('');
            const [authError, setAuthError] = React.useState(null);
            const [isDarkMode, setIsDarkMode] = React.useState(true);
            const [isSaving, setIsSaving] = React.useState(false);

            // Persistence effects
            React.useEffect(() => { 
                localStorage.setItem('ds_hub_events', JSON.stringify(events));
                localStorage.setItem('ds_hub_staff', JSON.stringify(staff));
                localStorage.setItem('ds_hub_tasks', JSON.stringify(tasks));
                localStorage.setItem('ds_hub_vibe', JSON.stringify(deskStatus));
                localStorage.setItem('ds_hub_report', JSON.stringify(currentReport));
            }, [events, staff, tasks, deskStatus, currentReport]);

            // Auth
            React.useEffect(() => {
                const initAuth = async () => {
                    try { await signInAnonymously(auth); } 
                    catch (e) { setAuthError(e.code === 'auth/configuration-not-found' ? 'config-missing' : e.code); }
                };
                initAuth();
                return onAuthStateChanged(auth, (u) => { if (u) setUser(u); });
            }, []);

            // Real-time Cloud Sync
            React.useEffect(() => {
                if (!user) return;
                const unsubShifts = onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'shifts'), (snap) => {
                    const data = {};
                    snap.forEach(d => {
                        const s = d.data();
                        if (!data[s.date]) data[s.date] = [];
                        data[s.date].push({ ...s, id: d.id });
                    });
                    setEvents(data);
                });
                const unsubStaff = onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'staff'), (snap) => {
                    const list = {};
                    snap.forEach(d => { list[d.id] = { ...d.data(), id: d.id }; });
                    setStaff(list);
                });
                const unsubTasks = onSnapshot(collection(db, 'artifacts', appId, 'public', 'data', 'checklist'), (snap) => {
                    const list = [];
                    snap.forEach(d => list.push({ ...d.data(), id: d.id }));
                    setTasks(list);
                });
                const unsubStatus = onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'deskStatus', 'current'), (snap) => {
                    if (snap.exists()) setDeskStatus(snap.data());
                });
                const unsubReport = onSnapshot(doc(db, 'artifacts', appId, 'public', 'data', 'currentReport', 'current'), (snap) => {
                    if (snap.exists()) setCurrentReport({ ...INITIAL_REPORT, ...snap.data() });
                });
                return () => { unsubShifts(); unsubStaff(); unsubTasks(); unsubStatus(); unsubReport(); };
            }, [user]);

            // Staff Management
            const addStaff = async () => {
                if (!newStaffName.trim() || !user) return;
                const randomColor = COLORS[Math.floor(Math.random() * COLORS.length)];
                await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'staff'), {
                    name: newStaffName.trim(),
                    color: randomColor,
                    createdAt: Date.now()
                });
                setNewStaffName('');
            };
            const deleteStaff = async (id) => {
                if (!user) return;
                await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'staff', id));
            };

            // Shift Management
            const addShift = async () => {
                if (!selectedDate || !user || !newEvent.empId) return;
                setIsSaving(true);
                await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'shifts'), { 
                    ...newEvent, 
                    date: String(selectedDate), 
                    confirmed: true,
                    createdAt: Date.now() 
                });
                setIsAddModalOpen(false);
                setIsSaving(false);
            };
            const toggleConfirmation = async (id, currentStatus) => {
                if (!user) return;
                await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'shifts', id), { confirmed: !currentStatus });
            };
            const updateShiftStaff = async (shiftId, newStaffId) => {
                if (!user) return;
                await updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'shifts', shiftId), { empId: newStaffId });
            };
            const removeShift = async (id) => { if (!user) return; await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'shifts', id)); };

            // Drag and Drop Logic
            const onDragStart = (e, staffId) => {
                e.dataTransfer.setData("staffId", staffId);
                e.dataTransfer.effectAllowed = "move";
            };
            const onDragOver = (e) => { e.preventDefault(); e.currentTarget.classList.add('drag-over'); };
            const onDragLeave = (e) => { e.currentTarget.classList.remove('drag-over'); };
            const onDropOnShift = (e, shiftId) => {
                e.preventDefault();
                e.currentTarget.classList.remove('drag-over');
                const staffId = e.dataTransfer.getData("staffId");
                if (staffId && shiftId) updateShiftStaff(shiftId, staffId);
            };

            const month = currentDate.getMonth();
            const year = currentDate.getFullYear();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const firstDayOfMonth = new Date(year, month, 1).getDay();

            // Error Helper
            if (authError === 'config-missing') return React.createElement('div', { className: "h-screen bg-slate-950 flex items-center justify-center p-6 text-center" }, 
                React.createElement('div', { className: "max-w-xl space-y-6" },
                    React.createElement('div', { className: "text-rose-500 font-black text-6xl" }, "!"),
                    React.createElement('h2', { className: "text-white text-2xl font-bold uppercase" }, "Cloud Sync Required"),
                    React.createElement('p', { className: "text-slate-400 text-sm" }, "Enable 'Anonymous' Authentication in your Firebase Console to start syncing with the team."),
                    React.createElement('button', { onClick: () => window.location.reload(), className: "bg-blue-600 text-white px-10 py-4 rounded-xl font-black uppercase transition-all shadow-xl" }, "Refresh Now")
                )
            );

            if (!user) return React.createElement('div', { className: "h-screen bg-slate-950 flex flex-col items-center justify-center p-6 gap-6" }, 
                React.createElement('div', { className: "w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin" }),
                React.createElement('p', { className: "text-blue-500 font-black tracking-widest text-[10px] uppercase animate-pulse" }, "Securing Connection...")
            );

            const calendarDays = [];
            for (let i = 0; i < firstDayOfMonth; i++) calendarDays.push(React.createElement('div', { key: `p-${i}`, className: `h-24 sm:h-32 border ${isDarkMode ? 'border-slate-800 bg-slate-900/10' : 'border-slate-100'}` }));
            for (let d = 1; d <= daysInMonth; d++) {
                const dateKey = `${year}-${String(month + 1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
                const isHoliday = HOLIDAYS_2026[dateKey];
                const dayShifts = events[dateKey] || [];
                calendarDays.push(
                    React.createElement('div', {
                        key: d,
                        onClick: () => setSelectedDate(dateKey),
                        className: `h-24 sm:h-32 border p-2 cursor-pointer relative group transition-all ${isDarkMode ? 'border-slate-800 hover:bg-slate-800' : 'border-slate-100 hover:bg-slate-50'} ${selectedDate === dateKey ? 'ring-2 ring-blue-500 z-10' : ''}`
                    }, 
                        React.createElement('span', { className: `text-sm font-bold ${isHoliday ? 'text-rose-500' : isDarkMode ? 'text-slate-400' : 'text-slate-600'}` }, d),
                        isHoliday && React.createElement('div', { className: "text-[8px] text-rose-500 font-bold uppercase truncate" }, String(isHoliday)),
                        React.createElement('div', { className: "mt-1 space-y-0.5 overflow-hidden" }, 
                            dayShifts.map(s => React.createElement('div', { 
                                key: s.id, 
                                className: `${staff[s.empId]?.color || 'bg-slate-400'} text-white text-[9px] px-1 rounded truncate flex items-center gap-1 ${s.confirmed === false ? 'opacity-60 grayscale-[0.5]' : ''}` 
                            }, 
                                s.confirmed === false && React.createElement('span', { className: "text-[8px] font-black" }, "?"),
                                `${String(s.time)} ${staff[s.empId]?.name || 'Staff'}`
                            ))
                        ),
                        React.createElement('button', { 
                            onClick: (e) => { e.stopPropagation(); setSelectedDate(dateKey); setIsAddModalOpen(true); },
                            className: "absolute bottom-1 right-1 opacity-0 group-hover:opacity-100 bg-blue-600 text-white p-1 rounded-lg text-xs"
                        }, "+")
                    )
                );
            }

            return React.createElement('div', { className: `${isDarkMode ? 'bg-slate-950 text-slate-100' : 'bg-white text-slate-900'} h-screen flex flex-col md:flex-row overflow-hidden font-sans` },
                // Sidebar Nav
                React.createElement('div', { className: `w-20 border-r flex flex-col items-center py-8 gap-8 ${isDarkMode ? 'bg-slate-900 border-slate-800' : 'bg-slate-50 border-slate-200'} no-print` },
                    React.createElement('div', { className: "text-blue-500 font-black text-2xl italic" }, "DS"),
                    React.createElement('button', { onClick: () => setActiveTab('calendar'), className: `p-3 rounded-2xl transition-all ${activeTab === 'calendar' ? 'bg-blue-600' : 'hover:bg-slate-800'}` }, React.createElement(Icons.Calendar)),
                    React.createElement('button', { onClick: () => setActiveTab('report'), className: `p-3 rounded-2xl transition-all ${activeTab === 'report' ? 'bg-blue-600' : 'hover:bg-slate-800'}` }, React.createElement(Icons.FileText)),
                    React.createElement('button', { onClick: () => setIsStaffModalOpen(true), className: "p-3 rounded-2xl transition-all hover:bg-slate-800" }, React.createElement(Icons.Users)),
                    React.createElement('div', { className: "mt-auto flex flex-col items-center gap-4" },
                        isSaving && React.createElement('div', { className: "w-2 h-2 bg-emerald-500 rounded-full animate-ping" }),
                        React.createElement('button', { onClick: () => setIsDarkMode(!isDarkMode), className: "p-3 opacity-40 hover:opacity-100" }, isDarkMode ? "â˜€ï¸" : "ðŸŒ™")
                    )
                ),
                
                activeTab === 'calendar' ? 
                React.createElement('div', { className: "flex-1 flex overflow-hidden" },
                    // Status & Staff Sidebar
                    React.createElement('div', { className: `w-80 border-r p-6 overflow-y-auto no-scrollbar ${isDarkMode ? 'bg-slate-900/40 border-slate-800' : 'bg-slate-50 border-slate-100'} no-print` },
                        React.createElement('header', { className: "mb-6" },
                            React.createElement('h1', { className: "text-xl font-black tracking-tighter" }, "DESTINY SPRINGS"),
                            React.createElement('p', { className: "text-[10px] font-bold text-slate-500 uppercase" }, "Team Hub")
                        ),
                        
                        // Drag Source: Staff List
                        React.createElement('section', { className: "mb-6" },
                            React.createElement('h2', { className: "text-[10px] font-black text-slate-500 uppercase mb-3 tracking-widest italic" }, "Available Staff (Drag to Swap)"),
                            React.createElement('div', { className: "flex flex-wrap gap-2" }, Object.values(staff).map(s => (
                                React.createElement('div', { 
                                    key: s.id, 
                                    draggable: true,
                                    onDragStart: (e) => onDragStart(e, s.id),
                                    className: `draggable-staff px-3 py-1 rounded-full text-[10px] font-black text-white ${s.color} shadow-sm active:scale-95 transition-transform`
                                }, s.name)
                            )))
                        ),

                        React.createElement('section', { className: "mb-6 p-4 rounded-2xl bg-blue-500/5 border border-blue-500/10" },
                            React.createElement('h2', { className: "text-[10px] font-black text-slate-500 uppercase mb-3 tracking-widest" }, "Desk Vibe"),
                            React.createElement('div', { className: "flex flex-wrap gap-2 mb-4" }, DESK_VIBES.map(v => React.createElement('button', { key: v.label, onClick: () => setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'deskStatus', 'current'), { vibe: v, note: deskStatus.note }), className: `p-2 rounded-xl text-xl ${deskStatus.vibe?.label === v.label ? 'bg-blue-600' : 'bg-slate-800/50'}` }, v.emoji))),
                            React.createElement('textarea', { value: deskStatus.note || '', onChange: e => setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'deskStatus', 'current'), { vibe: deskStatus.vibe, note: e.target.value }), className: "w-full bg-slate-800/50 border-none rounded-xl p-3 text-xs h-16 outline-none focus:bg-slate-800", placeholder: "Immediate alerts..." })
                        ),

                        selectedDate && React.createElement('section', { className: "bg-blue-500/5 p-4 rounded-2xl border border-blue-500/10" },
                            React.createElement('h2', { className: "text-[10px] font-black text-slate-500 uppercase mb-3 tracking-widest" }, "Shifts: " + selectedDate),
                            React.createElement('div', { className: "space-y-1" }, (events[selectedDate] || []).map(s => (
                                React.createElement('div', { 
                                    key: s.id, 
                                    onDragOver: onDragOver,
                                    onDragLeave: onDragLeave,
                                    onDrop: (e) => onDropOnShift(e, s.id),
                                    className: `p-3 rounded-xl flex items-center justify-between group transition-all ${isDarkMode ? 'bg-slate-900 border border-slate-800' : 'bg-white border border-slate-200'}` 
                                },
                                    React.createElement('div', { className: "flex items-center gap-3" },
                                        React.createElement('button', { 
                                            onClick: () => toggleConfirmation(s.id, s.confirmed !== false),
                                            className: `w-5 h-5 rounded-full border-2 flex items-center justify-center transition-all ${s.confirmed !== false ? 'bg-emerald-500 border-emerald-500' : 'border-slate-700'}`
                                        }, s.confirmed !== false && React.createElement('span', { className: "text-[10px] font-black text-white" }, "âœ“")),
                                        React.createElement('div', { className: "text-left" },
                                            React.createElement('p', { className: "text-[9px] font-bold opacity-50 uppercase" }, String(s.time)),
                                            React.createElement('p', { className: "text-[10px] font-black" }, staff[s.empId]?.name || 'Staff')
                                        )
                                    ),
                                    React.createElement('button', { onClick: () => removeShift(s.id), className: "opacity-0 group-hover:opacity-100 text-rose-500 text-xs" }, "Ã—")
                                )
                            )))
                        )
                    ),
                    // Main Grid
                    React.createElement('div', { className: "flex-1 p-8 overflow-y-auto no-scrollbar" },
                        React.createElement('div', { className: "flex justify-between items-center mb-8 no-print" },
                            React.createElement('h2', { className: "text-4xl font-black tracking-tighter uppercase" }, currentDate.toLocaleDateString(undefined, { month: 'long', year: 'numeric' })),
                            React.createElement('div', { className: "flex gap-3 bg-slate-900 p-1 rounded-xl shadow-lg border border-slate-800" }, 
                                React.createElement('button', { onClick: () => setCurrentDate(new Date(year, month-1, 1)), className: "p-2 hover:bg-slate-800 rounded-lg text-xs" }, "â—€"),
                                React.createElement('button', { onClick: () => window.print(), className: "px-4 py-1 text-[10px] font-black uppercase hover:text-blue-500 transition-all" }, "Print Summary"),
                                React.createElement('button', { onClick: () => setCurrentDate(new Date(year, month+1, 1)), className: "p-2 hover:bg-slate-800 rounded-lg text-xs" }, "â–¶")
                            )
                        ),
                        React.createElement('div', { className: "grid grid-cols-7 border border-slate-800 rounded-2xl overflow-hidden shadow-2xl" },
                            ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => React.createElement('div', { key: day, className: "p-4 text-center text-[10px] font-black text-slate-500 uppercase border-b border-slate-800 bg-slate-900/30" }, day)),
                            calendarDays
                        )
                    )
                ) : 
                // Report Page
                React.createElement('div', { className: "flex-1 p-12 overflow-y-auto bg-slate-950 no-scrollbar" },
                    React.createElement('div', { className: "max-w-4xl mx-auto space-y-8" },
                        React.createElement('header', { className: "border-b border-slate-800 pb-6 mb-8 text-left" },
                            React.createElement('h2', { className: "text-5xl font-black text-blue-500 italic tracking-tighter uppercase" }, "SHIFT REPORT"),
                            React.createElement('p', { className: "text-slate-500 text-xs font-bold uppercase tracking-widest mt-2" }, "Official Destiny Springs Healthcare Handover")
                        ),
                        React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-8 text-left" }, 
                            Object.keys(INITIAL_REPORT).map(k => React.createElement('div', { key: k, className: "space-y-2" },
                                React.createElement('label', { className: "text-[10px] font-black text-slate-500 uppercase tracking-widest" }, k.replace(/([A-Z])/g, ' $1')),
                                React.createElement('textarea', { 
                                    value: String(currentReport[k] || ''), 
                                    onChange: e => updateDoc(doc(db, 'artifacts', appId, 'public', 'data', 'currentReport', 'current'), { ...currentReport, [k]: e.target.value }), 
                                    className: "w-full bg-slate-900 border border-slate-800 rounded-2xl p-4 text-sm h-32 focus:border-blue-500 outline-none transition-all resize-none no-scrollbar", 
                                    placeholder: `Update status...` 
                                })
                            ))
                        )
                    )
                ),

                // Assignment Modal
                isAddModalOpen && React.createElement('div', { className: "fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 z-50 text-left" },
                    React.createElement('div', { className: "bg-slate-900 p-8 rounded-3xl w-full max-w-sm border border-slate-800 shadow-2xl animate-fade-in" },
                        React.createElement('h3', { className: "text-2xl font-black mb-6 tracking-tight uppercase text-white" }, "Assign Staff"),
                        React.createElement('div', { className: "grid grid-cols-2 gap-2 mb-6" }, Object.values(staff).map(s => React.createElement('button', { key: s.id, onClick: () => setNewEvent({...newEvent, empId: s.id}), className: `flex items-center gap-2 p-3 rounded-xl border-2 text-[11px] font-black transition-all ${newEvent.empId === s.id ? 'border-blue-500 bg-blue-500/10 text-blue-400' : 'border-transparent text-slate-500 hover:bg-slate-800'}` }, 
                            React.createElement('div', { className: `w-2 h-2 rounded-full ${s.color}` }), s.name
                        ))),
                        React.createElement('input', { type: "time", value: newEvent.time, onChange: e => setNewEvent({...newEvent, time: e.target.value}), className: "w-full bg-slate-800 border-none rounded-xl p-3 text-white font-bold mb-4 outline-none" }),
                        React.createElement('button', { onClick: addShift, className: "w-full bg-blue-600 text-white py-4 rounded-xl font-black active:scale-95 transition-transform" }, "ASSIGN SHIFT"),
                        React.createElement('button', { onClick: () => setIsAddModalOpen(false), className: "w-full mt-2 text-slate-600 text-[10px] font-black uppercase tracking-widest text-center block" }, "Close")
                    )
                ),

                // Staff Management Modal
                isStaffModalOpen && React.createElement('div', { className: "fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 z-50 text-left" },
                    React.createElement('div', { className: "bg-slate-900 p-8 rounded-3xl w-full max-w-md border border-slate-800 shadow-2xl animate-fade-in" },
                        React.createElement('div', { className: "flex justify-between items-center mb-6" },
                            React.createElement('h3', { className: "text-2xl font-black uppercase text-white" }, "Manage Team"),
                            React.createElement('button', { onClick: () => setIsStaffModalOpen(false), className: "text-slate-500 text-2xl" }, "Ã—")
                        ),
                        React.createElement('div', { className: "flex gap-2 mb-6" }, 
                            React.createElement('input', { value: newStaffName, onChange: e => setNewStaffName(e.target.value), className: "flex-1 bg-slate-800 rounded-xl p-3 text-white text-sm outline-none", placeholder: "New employee name..." }),
                            React.createElement('button', { onClick: addStaff, className: "bg-blue-600 px-6 rounded-xl font-black" }, "+")
                        ),
                        React.createElement('div', { className: "space-y-2 max-h-64 overflow-y-auto no-scrollbar" }, Object.values(staff).map(s => (
                            React.createElement('div', { key: s.id, className: "flex items-center justify-between p-3 bg-slate-800/50 rounded-xl" },
                                React.createElement('div', { className: "flex items-center gap-3" },
                                    React.createElement('div', { className: `w-3 h-3 rounded-full ${s.color}` }),
                                    React.createElement('span', { className: "text-sm font-bold" }, s.name)
                                ),
                                React.createElement('button', { onClick: () => deleteStaff(s.id), className: "text-rose-500 font-bold" }, "Delete")
                            )
                        )))
                    )
                )
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</head>
<body class="overflow-hidden">
    <div id="root"></div>
</body>
</html>
